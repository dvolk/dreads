{% extends 'base.jinja2' %}
{% block content %}
  <body>
    {% if in_progress_books %}
      <h1>In progress</h1>
      <ul>
        {% for updated, book in in_progress_books %}
          <li>
            {% set progress = (book.progress.chapter_index + 1)|string + " / " + book.chapters_count|string %}
            {% set updated_datetime_str = humanize.naturaltime(updated) %}
            <a href="{{ url_for('continue_reading', book_id=book.id) }}">{{ book.title }}</a>&nbsp;&nbsp;({{ progress }})&nbsp;&nbsp;-&nbsp;&nbsp;<i>{{ updated_datetime_str }}</i>&nbsp;&nbsp;<a href="{{ url_for('remove_progress', book_progress_id=book.progress.id) }}">[X]</a>
          </li>
        {% endfor %}
      </ul>
    {% endif %}
    {% if unread_books %}
      <h1>Unread</h1>
      <ul>
        {% for book in unread_books %}
          <li>
            <a href="{{ url_for('continue_reading', book_id=book.id) }}">{{ book.title }}</a>
          </li>
        {% endfor %}
      </ul>
    {% endif %}
    {% if finished_books %}
      <h1>Finished</h1>
      <ul>
        {% for book in finished_books %}
          <li>
            <a href="{{ url_for('continue_reading', book_id=book.id) }}">{{ book.title }}</a>
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </body>
{% endblock %}
